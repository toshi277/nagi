<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-md-8">

      <div class="card shadow-sm">
        <div class="card-body">

          <h3 class="card-title mb-3"><%= @post.title %></h3>

          <p class="card-text mb-4"><%= @post.body %></p>

          <div class="d-flex justify-content-between align-items-center">

            <!-- ===== Like ===== -->
            <div>
              <% if user_signed_in? %>
                <% if @post.favorited_by?(current_user) %>
                  <%= link_to post_favorite_path(@post),
                              method: :delete,
                              class: "text-danger",
                              data: { confirm: "いいねを外しますか？" } do %>
                    <i class="fas fa-heart"></i>
                    <%= @post.favorites.count %>
                  <% end %>
                <% else %>
                  <%= link_to post_favorite_path(@post),
                              method: :post,
                              class: "text-secondary" do %>
                    <i class="far fa-heart"></i>
                    <%= @post.favorites.count %>
                  <% end %>
                <% end %>
              <% else %>
                <span class="text-muted">
                  <i class="far fa-heart"></i>
                  <%= @post.favorites.count %>
                </span>
              <% end %>
            </div>

            <!-- ===== Owner actions ===== -->
            <% if user_signed_in? && current_user == @post.user %>
              <div>
                <%= link_to "編集", edit_post_path(@post),
                            class: "btn btn-sm btn-outline-primary mr-2" %>

                <%= link_to "削除", post_path(@post),
                            method: :delete,
                            data: { confirm: "本当に削除しますか？" },
                            class: "btn btn-sm btn-outline-danger" %>
              </div>
            <% end %>

          </div>
        </div>
      </div>

      <div class="mt-3">
        <%= link_to "一覧へ戻る", posts_path, class: "btn btn-link" %>
      </div>

    </div>
  </div>
</div>

